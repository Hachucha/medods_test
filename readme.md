# Backend Developer Test Task

## Описание

Тестовое задание на позицию Backend Developer.  
Реализована часть сервиса аутентификации на Go с использованием PostgreSQL и Docker.

## Используемые технологии

- Go
- PostgreSQL
- Docker, Docker Compose

## Запуск

1. Запустите сервис и базу данных одной командой:
   ```sh
   docker-compose -f docker-compose.yaml up -d
   ```
   Все параметры запуска берутся из дефолтных конфигурационных файлов (включая `.env`).
   Есть образец для .env: .env.example
2. Запишите в бд нужную структуру из test_database.sql, т.к. я не встраивал механизм миграций.
3. Можно тестировать

## API

Сервис предоставляет четыре конечные точки:

1. **POST `/auth/token`**  
   Получение пары токенов (access и refresh) для пользователя по GUID.

2. **POST `/auth/refresh`**  
   Обновление пары токенов.

3. **GET `/auth/me`**  
   Получение GUID текущего пользователя (защищённый роут).

4. **POST `/auth/logout`**  
   Деавторизация пользователя (после выполнения этого запроса с access токеном, пользователь теряет доступ к `/auth/me` и refresh).

## Swagger-документация

- Swagger-документация с описанием всех ошибок и примерами запросов находится в папке [`docs/`](./auth_service/docs).
- Для просмотра используйте любой Swagger UI или онлайн-редактор (например, https://editor.swagger.io/).

## Требования к токенам

- **Access-токен**
  - Формат: JWT
  - Алгоритм подписи: SHA512
  - Не хранится в базе

- **Refresh-токен**
  - Формат: произвольный (base64)
  - Хранится в базе только как bcrypt-хеш
  - Защищён от повторного использования и изменений на стороне клиента

## Требования к операции refresh

- Обновление возможно только той парой токенов, которая была выдана вместе
- При изменении User-Agent операция запрещается, пользователь деавторизуется
- При попытке обновления с нового IP отправляется POST-запрос на webhook (операция не запрещается)


## Проверка

- Сервис и база данных поднимаются одной командой через Docker Compose.
- Все конечные точки описаны в swagger-документации с примерами и ошибками.

---

